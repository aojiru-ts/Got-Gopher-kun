//Got Gopher-kun

package main

import (
	"os"
	"strings"
	"time"
	"unicode/utf8"

	tm "github.com/buger/goterm"
)

func main() {
	const repCount = 64
	var gopher = []string{gopher1, gopher2, gopher3, gopher2}
	var widthSmall = tm.Width() / (repCount - 14)

	tm.Clear()
	for i := 0; i < repCount; i++ {
		printGopher(gopher[i%4], widthSmall*i)
		time.Sleep(50 * time.Millisecond)
	}
	//flag.Parse()
	var argWord = (strings.Join(os.Args[1:], " "))
	if argWord != "" {
		var word = tm.Color("Did you mean: ", tm.RED) + "git " + argWord
		var insertWordRow = 5
		var fukidashi = addFukidashi(gopher[repCount%4], gopherSpeak, word, 3, 63, insertWordRow, 19+utf8.RuneCountInString(argWord))
		printGopher(fukidashi, widthSmall*(repCount-1))
	}
}

func printGopher(con string, x int) {
	con = strings.Replace(con, "\n", "                    \n", -1)
	printScreen(con, 1, 1, x, 1)
}

func printScreen(con string, x, y, moveX, moveY int) {
	con = tm.MoveTo(con, moveX, moveY)
	tm.MoveCursor(x, y)
	tm.Println(con)
	tm.Flush()
}

func addFukidashi(s, addString, word string, startNum, width, insertWordRow, wordNum int) string {
	var ss = strings.Split(s, "\n")
	var addStrings = strings.Split(addString, "\n")
	var result string
	var j int
	for i := 0; i < len(ss); i++ {
		if i >= startNum && i < startNum+len(addStrings) {
			if j == insertWordRow {
				insertWord(&addStrings, word, i, startNum, wordNum)
			}
			zabuton(&ss, width, wordNum, i)
			result += ss[i] + addStrings[i-startNum] + "\n"
			j++
		} else {
			result += ss[i] + "\n"
		}
	}
	return result
}

func zabuton(ss *[]string, width, wordNum, i int) {
	var ssSize = utf8.RuneCountInString((*ss)[i])
	if ssSize < width {
		for k := ssSize; k < width; k++ {
			(*ss)[i] += " "
		}
	} else {
		(*ss)[i] = (*ss)[i][0:wordNum]
	}
}

func insertWord(addStrings *[]string, word string, i, startNum, wordNum int) {
	var now = utf8.RuneCountInString((*addStrings)[i-startNum])
	(*addStrings)[i-startNum] += word
	var minus = utf8.RuneCountInString((*addStrings)[i-startNum-1])
	wordNum += now
	if wordNum < minus {
		for k := wordNum; k < minus; k++ {
			(*addStrings)[i-startNum] += " "
		}
		(*addStrings)[i-startNum] += "]"
	}
}

const (
	gopher1 = `
                              ...++OXwwz+..   ..u+..
                          .(T<<<+V"!   ?"4J?4k+jJ+:?n
                       .JC::::+#!       ..(R<?TNMN>:(;
                    .JC::::::<K        dMMMHy::<TN+:J
                 .J5+++<;::;:(b        7MM#?b::::<?Q\
               .TaZ"!''?74J::;W.           .$::::::<T,
             .VjV!      ..,W+:<4,         .5;::;:::::?|
            .C<P       dMMB#N:::?Ug.....vC<:::::::::::?o
          ..D:(F       (HM#^d<+gMNe+++:::::::;::;::;:::d,
       .J3;j$:;b           .dMMMMM9=zTh::::;:::::::::::<h
      .#<;+dI::?h.        .VqBTTI==lzuW<::;:::;::;::;:::?L
      ,D:?MN>::::?6J....JYC(#==zdT@!?m:::::::::::::::::::?h
       N+::d>:::::::::::::::?9VY[ .l ,Z::;::;::;::;::;::::?H,
        7T1jZ::;:::;::;:::::::::q, (RZC:::::::::::::::;::::?N.
            1::::::::::;::;::::::?<:::::::;::;::;::;::::;:::?b
            .n::;::;:::::::::;::::::::::;::::::<+::::::::::::d<
             ,I:::::;:::;:::::::;:::;::::::;+Z=!'?k;::;::;:::(b
              ,+:;:::::;::;::;::::::::;::;::?o  ..V:::::::;::<M
               jx::::::::::::::::;:::::::::::dVC<<<::;:::::::;d|
                ?e::;::::::;::;:::;::;::;:::J5::::::::;::;::::(@
                 .G<::;:;::::::::::::::::::::::::::::::::::;::<N+.
                   We:::::;::;::;::;::;::;:::::::::;:::;:::::::C  (,
                    Tx::::::::::::::::::::;::;::;:::;::::;:::;:W-.Y'
                     u<:;::;::;::;::;::;::::::::::::::;::::::::X
                     ,s::::::::::::::::::::;::;::;::::::::;::::X
                      N<::;::;::;::;::;::;::::::::;::;::;:::;::W
                      (b::::::::::::::::::::;::;::::::::::::::<P
                      .#::;::;::;::;::;::;:::::::::;::;::;::::+]
                       #::::::::::::::::::::;::;::::::::::;::;d!
                       K::;::;::;::;::;::;::::::;::;::;::::::+K
                       K::::::::::::::::::::;::::::::::;:::;:j\
                       #::;::;::;::;::;::;::::;::;::;:::::;:+F
                       b:::::::::::::::::::::::::::::::::::+#
                       j<;::;::;::;::;::;::;::;::;::;::;:+Z^
                       .b:::::::::::::::::::::::::::::<+V!
                       =(B+::;::;::;::;::;::;::;::;++;' (,
                          ?We+;:::::++++++<::;+++T"' O .J\
                             _7""TOGaJ@   q&J"^       ?^'
                                      (.  j
                                      (, .(.
                                       ?77=
`

	gopher2 = `
                              ...++OXwwz+..   ..u+..
                          .(T<<<+V"!   ?"4J?4k+jJ+;?n
                       .JC::::+#!       ..(R<?TNMN>:(;
                    .JC:::;::<K        dMMMHy::<TN+:J
                 .J5+++<::::;(b        TMM#<b::::<?Q\
               .TuZ"!''?74J:::W.           .$:;::::<T,
             .VjV!      ..,W+:<4,         .5:::::::::?l
            .C<P       dMMB#N:::?6a.....vC<::;::;::;::?o
          ..D:(F       (HM#^d<+gMNe+++::::::::::::::::;d,
       .J3;j$::b           .dMMMMM9=zTh::;::;::;::;::::<h
      .#<:+dI::?h.        .VqBTTI==lzuW<:::::::::::;::::?L
      ,D:?MN>::::?6J....JYC(#==zdT@!?h::::;::;::;::::;:::?h
       N+::d>:::::::::::::::?9VY[ .l ,Z:::::::::::::::::::?H,
        7T1jZ:;::;::;:::::::::::X, (RZC::;::;::;::;:::;::::?N.
            1:::::::::;::;:::::::?<::::::::::::::::;::::;:::?L
            .n::;::;::::::;::;::::::::::;::;::;::::::;::::;::d<
             ,I::::::::;:::::::::::::::::::::::;::;::::::::::(b
              ,+::;::;:::::;::;::;::;::;::;::++&s&+:::;::;:::<M--(.
               jc:::::::;:::::::::::::::::::;j;   .X<::::::;::d,  j%
                ?e::;:::::;::;::;::;::;::;::<jeJu..8;::;::::::(#=+?
                 .G<::;::::::::::::::::::::<T3:::::::::::;::::<N
                   We:::;::;::;::;::;::;:::::::::;:::;:::::;:::W'
                    Tx::::::::::::::::::;::;:::::::;::::;::::;:X
                     u<::;::;::;::;::;::::::::;::::::::::::::::X
                     ,s::::::::::::::::::;:::::;::;::;::;::;:::X
                      N<::;::;::;::;::;:::;::;:::::::::::::::::W
                      (b:::::::::::::::::::::::::;::;::;::;::;<P
                      .#:;::;::;::;::;::;::;::::::::::::::::::+]
                       #:::::::::::::::::::::;::;::;::;::;::;:d!
                       K:::;::;::;::;::;::;::::::::::::::::::+K
                       K::::::::::::::::::::::;::;::;::;::;::j\
                       #:;::;::;::;::;::;::;::::::::::::::::+F
                       b:::::::::::::::::::::;::;::;::;::;:+#
                       j<::;::;::;::;::;::;::::::::::::::+?%.
                       .b:::::::::::::::::::::;::;::;:<+Z'  (,
                       =(B+:;::;::;::;::;::;::::::;++Y^  ?-.d!
                          ?He+;::::;<<;:;::::;+++T"'       '
                             ?"4a++=!??#C++dY"^
                                  .:  .='
                                  ,_. (.
                                  ,IdY=
`

	gopher3 = `
                              ...+?OXwwz+..   ..u+..
                          .(T<;<jV"!   ?"4J?4k+jJ+:?n
                       .J>:;::+#!       ..(R<?TNMN>:(;
                    .JC::::::<K        dMMMHy::<TN+:J
                 .J5+++<;::::jb        7MM#?b:::;<?Q\
               .TaZ"!''?74J;:;W.           .$;:::::<T,
             .VjV!      ..,W+:<4,         .5:::::::::?|
            .C<P       dMMB#N::;?6g.....vC<:::;:::::::?o
          ..D;(F       (HM#^d<jgMNe+++;;::::;:::;::;::;d,
       .J3;j$:<b           .dMMMMM9=zTh:;::::::::::::::<h
      .#<:+dI::?h.        .VqBTTI==lzuW<:::;::;::;::;:::?L
      ,D:?MN>:;::?6J....JYC+#==zdT@!?h:::::::::::::::::::?h
       N+::dc:::::::::::::::?9VY[ .l ,R::;::;::;::;::;::::?H,
        7T1jZ;::;:::::::::::::::d, (RZ3::::::::::::::::;:::?N.
            1:::::;::;::;::;:::::?<::::::;::;::;::;::::::::;?#7??1,
            .n;::::::::::::::;::;::::::::::::::::::;::;::;:::d;  (%
             ,I::;::;::;::;:::::::::::;::;::;::;:::::::::::::jN_?!
              ,+::::::::::::::;::;::;:::::::::::;:::;::;::;::<M,
               jx::;::;::;::;::::::::::;::;::;:::::;::::::::::d]
                ?e:::::::::::::;::;:::::::::::::::::::;::;::;:(b
                 .G<;::;::;::::::::;::;::;::;+++++;::::::::::;<N
                   We::::::;::;:::::::::::::;j!   jJ::;::;::::<W'
                    Tx:;:::::::;::;::;::;::<jm.., qD:::::::;::<X
                     u<::;::;:::::::::::::;73:::?7>::;::;:::::<X
                     ,s:::::::::;::;::;::::::::::::::::::::::::X
                      N+;::;::;:::::::::;::::;::;:::;::;::;::;<W
                      (b:::::::::;::;:::::;:::::::::::::::::::<P
                      .#:::;::;:::::::;:::::::;::;::;::;::;::;(]
                       @:::::::::;:::::::;::;:::::::::::::::::d!
                       K::;::;::::;::;:::::::::;::;::;::;::;:+K
                       K::::::;::::::::;::;:::::::::::::::::;j\
                       #:::;::::;::;:::::::;::;::;::;::;:::;jF _7,
                       b;::::::::::::;::;:::::::::::::::;::jM., .m'
                       j<:::;::;::;:::::::::;::;::;::;:::jZ^  .>?!
                       .b;::::::::::::;::;::::::::::;:++7!
                       =(B+::;::;::;:::::::;::;::;;++Y^
                          (G+::;:::::;::;:::;;+++T"'
                            (5a7"4J<::;;<j+dY"^
                             .>   .Y777^'
                            .$.  J'
                            .3W(d'
`

	// tanasinn
	gopherSpeak = `
                             ...........................
                  ...?777!'                               ??"77+...
            ..?"!                                                   ?"+,
          .=                                                            .1.
         .[  
     ...?7!                                                            .,=
 ?T5<<<+(((((((....                                              .../"!
                    _?"">(.......                  ........<?""!'
                                   ''''''''''''''     
`
)
